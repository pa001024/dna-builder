# äºŒé‡èºæ—‹æ„ç­‘æ¨¡æ‹Ÿå™¨ Duet Night Abyss Builder

<p align="center">
  <a href="https://dna-builder.edgeone.dev/"><img alt="Website" src="https://img.shields.io/website/https/dna-builder.edgeone.dev"></a>
  <a href="https://github.com/pa001024/dna-builder/actions/workflows/alpha.yml"><img src="https://img.shields.io/github/actions/workflow/status/pa001024/dna-builder/alpha.yml" alt="Build Status"></a>
  <a href="https://github.com/pa001024/dna-builder"><img src="https://img.shields.io/github/license/pa001024/dna-builder" alt="License"></a>
  <img alt="GitHub code size in bytes" src="https://img.shields.io/github/languages/code-size/pa001024/dna-builder">
</p>

**DNA Builder** ï¼ˆäºŒé‡èºæ—‹æ„ç­‘æ¨¡æ‹Ÿå™¨ï¼‰ç®€ç§°DOBï¼Œæ˜¯ä¸€ä¸ªç”¨äºæ¸¸æˆã€ŠäºŒé‡èºæ—‹ Duet Night Abyssã€‹çš„å¤šåŠŸèƒ½å·¥å…·ï¼Œæä¾›èµ„æ–™åº“ã€å…»æˆè®¡ç®—ã€è§’è‰²æ„å»ºå’Œä¼¤å®³è®¡ç®—å·¥å…·ç­‰è¯¸å¤šåŠŸèƒ½

## ç½‘é¡µç‰ˆ

æ”¯æŒ PWA (Progressive Web App), å¯ä»¥åœ¨æµè§ˆå™¨ä¸­å®‰è£…ä¸ºåº”ç”¨(æ”¯æŒæ–­ç½‘è®¿é—®), æ— éœ€ä¸‹è½½å®‰è£…

- **å›½å†…æœåŠ¡å™¨**: [https://xn--chq26veyq.icu/](https://xn--chq26veyq.icu/)
- **EdgeOne(å›½å†…è®¿é—®ä¸äº†)**ï¼š[https://dna-builder.edgeone.dev/](https://dna-builder.edgeone.dev/)
- **Vercel(å›½å†…è®¿é—®ä¸äº†)**ï¼š[https://dna-builder.vercel.app/](https://dna-builder.vercel.app/)

## æ¡Œé¢åº”ç”¨(æ¨è)

- **winget**: `winget install pa001024.dna-builder`
- **å¾®è½¯å•†åº—**: [https://apps.microsoft.com/detail/9nk8zw43shb1](https://apps.microsoft.com/detail/9nk8zw43shb1)
- **Windows**ï¼š[https://github.com/pa001024/dna-builder/releases/latest](https://github.com/pa001024/dna-builder/releases/latest)
- **æ— æ³•è¿è¡Œ**? è¯·ç¡®ä¿å·²å®‰è£… [Microsoft Edge WebView2](https://developer.microsoft.com/zh-cn/microsoft-edge/webview2/)ã€‚

å¾®è½¯å•†åº—æˆªå›¾
![å¾®è½¯å•†åº—æˆªå›¾](./misc/1.png)

## æ”¯æŒä½œè€…

å¦‚æœæ‚¨å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”æƒ³æ”¯æŒä½œè€…çš„å·¥ä½œï¼Œè¯·è€ƒè™‘ä»¥ä¸‹æ–¹å¼ï¼š

- **ç›´æ¥æèµ **ï¼š[https://afdian.com/a/pa001024](https://afdian.com/a/pa001024)
- **è´­ä¹°åº”ç”¨**ï¼š[https://apps.microsoft.com/detail/9nk8zw43shb1](https://apps.microsoft.com/detail/9nk8zw43shb1)

## åŠŸèƒ½ç‰¹ç‚¹

- ğŸ® **è§’è‰²æ„å»ºç³»ç»Ÿ**ï¼šæ”¯æŒè§’è‰²å±æ€§ã€æŠ€èƒ½ã€æ­¦å™¨å’Œ MOD é…ç½®
- ğŸ”¨ **è‡ªåŠ¨æ„å»º**ï¼šä¸€é”®è·å–å½“å‰é…ç½®ä¸‹æœ€å¤§ä¼¤å®³æ­¦å™¨+MODç»„åˆ
- ğŸ“Š **ä¼¤å®³è®¡ç®—å¼•æ“**ï¼šç²¾ç¡®è®¡ç®—æŠ€èƒ½ä¼¤å®³å’Œæ­¦å™¨ä¼¤å®³æœŸæœ›
- âš™ï¸ **ç›®æ ‡å‡½æ•°**ï¼šæ”¯æŒè‡ªå®šä¹‰è¡¨è¾¾å¼
- ğŸ¨ **ç›´è§‚ç•Œé¢**ï¼šå‹å¥½çš„ç”¨æˆ·ç•Œé¢ï¼Œæ–¹ä¾¿å¿«é€Ÿé…ç½®å’ŒæŸ¥çœ‹ç»“æœ
- ğŸ”„ **å®æ—¶è®¡ç®—**ï¼šé…ç½®å˜åŒ–æ—¶å®æ—¶æ›´æ–°è®¡ç®—ç»“æœ
- ğŸ£ **é’“é±¼æ¨¡æ‹Ÿå™¨**ï¼šå†…ç½®é’“é±¼æ•°æ®åº“ï¼Œæ”¯æŒæ¨¡æ‹Ÿé’“é±¼è¿‡ç¨‹
- ğŸ”’ **å¯†å‡½æ¨¡æ‹Ÿå™¨**ï¼šå†…ç½®å¯†å‡½æ•°æ®åº“ï¼Œæ”¯æŒæ¨¡æ‹Ÿå¼€æ ¸æ¡ƒ
- ğŸ“¦ **åº“å­˜ç®¡ç†**ï¼šæ”¯æŒæ­¦å™¨ã€MOD ç­‰ç‰©å“çš„åº“å­˜ç®¡ç†
- ğŸ” **æ‹¼éŸ³æœç´¢**ï¼šæ”¯æŒä¸­æ–‡æ‹¼éŸ³æœç´¢ï¼Œå¿«é€ŸæŸ¥æ‰¾è§’è‰²ã€æ­¦å™¨ã€MOD
- ğŸ† **æˆå°±ç³»ç»Ÿ**ï¼šæ”¯æŒæˆå°±è®°å½•
- ğŸ¤– **MCP Server**ï¼šæä¾› Model Context Protocol æ”¯æŒï¼Œå¯ç”¨äº AI é›†æˆ

## æŠ€æœ¯æ ˆ

### å‰ç«¯

- **æ¡†æ¶**ï¼šVue 3 + TypeScript
- **æ„å»ºå·¥å…·**ï¼šVite
- **UI ç»„ä»¶åº“**ï¼šTailwind CSS + daisyui + reka-ui
- **çŠ¶æ€ç®¡ç†**ï¼šPinia
- **è·¯ç”±**ï¼šVue Router
- **å›½é™…åŒ–**ï¼ši18next + i18next-http-backend
- **åŠ¨ç”»**ï¼šGSAP
- **å·¥å…·åº“**ï¼šlodash-es, @vueuse/core
- **å…¶ä»–**ï¼šdexie (IndexedDB), vue-flow (æµç¨‹å›¾), markdown-it (Markdown æ¸²æŸ“)
- **ç›‘æ§**ï¼šSentry (é”™è¯¯è¿½è¸ªå’Œæ€§èƒ½ç›‘æ§)
- **PWA**ï¼šworkbox (ç¦»çº¿æ”¯æŒ)

### æ¡Œé¢åº”ç”¨

- **æ¡†æ¶**ï¼šTauri 2 (Rust + WebView2)
- **æ’ä»¶**ï¼šclipboard-manager, dialog, http, notification, opener, process, updater

### æœåŠ¡å™¨ç«¯ï¼ˆå¯é€‰ï¼‰

- **è¿è¡Œæ—¶**ï¼šBun
- **æ¡†æ¶**ï¼šElysia
- **æ•°æ®åº“**ï¼šSQLite + Drizzle ORM
- **GraphQL**ï¼šgraphql-yoga + graphql-mobius + graphql-jit
- **è®¤è¯**ï¼šjsonwebtoken + bcrypt
- **å­˜å‚¨**ï¼šali-oss (é˜¿é‡Œäº‘ OSS)
- **å…¶ä»–**ï¼šcanvas (å›¾åƒå¤„ç†), rxjs (å“åº”å¼ç¼–ç¨‹)

### MCP Server (AI é›†æˆ)

- **æ¡†æ¶**ï¼šRust + tokio
- **åè®®**ï¼šModel Context Protocol SDK

## å¤šè¯­è¨€æ”¯æŒ

ç›®å‰ç•Œé¢, è§’è‰², MOD, æ­¦å™¨å·²åŠ å…¥ç¿»è¯‘

- **ä¸­æ–‡(ç®€ä½“/ç¹ä½“)**ï¼šé»˜è®¤è¯­è¨€
- **è‹±æ–‡**
- **æ—¥æœ¬èª**
- **í•œêµ­ì–´**
- **å…¶ä»–è¯­è¨€**ï¼šæ¬¢è¿è´¡çŒ®ç¿»è¯‘

## å®‰è£…å’Œè¿è¡Œ

### å¼€å‘ç¯å¢ƒ

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# ç±»å‹æ£€æŸ¥å’Œä»£ç è§„èŒƒ
pnpm lint

# è¿è¡Œæµ‹è¯•
pnpm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm coverage

# æ ¼å¼åŒ–ä»£ç 
pnpm format
```

### æ¡Œé¢åº”ç”¨

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œæ¡Œé¢åº”ç”¨
pnpm tauri dev

# æ„å»ºæ¡Œé¢åº”ç”¨
pnpm tauri build
```

### æœåŠ¡å™¨ç«¯

```bash
# è¿›å…¥æœåŠ¡å™¨ç›®å½•
cd server

# å®‰è£…ä¾èµ–
bun install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
bun dev

# ç”Ÿæˆæ•°æ®åº“è¿ç§»
bun run gen

# æ‰§è¡Œæ•°æ®åº“è¿ç§»
bun run migrate
```

### MCP Server

```bash
# æ„å»º MCP Server
pnpm build:mcp

# åŒæ—¶æ„å»ºå‰ç«¯å’Œ MCP Server
pnpm build:all
```

## é¡¹ç›®ç»“æ„

```
dna-builder/
â”œâ”€â”€ src/                  # å‰ç«¯æºä»£ç 
â”‚   â”œâ”€â”€ App.vue           # åº”ç”¨å…¥å£ç»„ä»¶
â”‚   â”œâ”€â”€ main.ts           # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ components/       # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ data/             # æ¸¸æˆæ•°æ®å’Œè®¡ç®—é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ CharBuild.ts  # æ ¸å¿ƒè®¡ç®—ç±»
â”‚   â”‚   â”œâ”€â”€ data-types.ts # æ•°æ®ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ leveled/      # ç­‰çº§ç›¸å…³ç±»
â”‚   â”‚   â””â”€â”€ tests/        # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ store/            # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ api/              # API è°ƒç”¨
â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ router/           # è·¯ç”±é…ç½®
â”œâ”€â”€ public/               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ imgs/             # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ i18n/             # ç¿»è¯‘æ–‡ä»¶
â”œâ”€â”€ src-tauri/            # Tauri æ¡Œé¢åº”ç”¨é…ç½®å’Œ Rust ä»£ç 
â”œâ”€â”€ server/               # æœåŠ¡ç«¯ä»£ç ï¼ˆBun + Elysiaï¼‰
â”œâ”€â”€ mcp_server/           # MCP Server (Rust)
â”œâ”€â”€ externals/            # å¤–éƒ¨ä¾èµ–
â”‚   â””â”€â”€ dna-api/          # DNA API åŒ…
â”œâ”€â”€ tools/                # å¼€å‘å·¥å…·
â”‚   â”œâ”€â”€ i18n_tool.ts      # å›½é™…åŒ–ç®¡ç†å·¥å…·
â”‚   â””â”€â”€ icon_tool.ts      # å›¾æ ‡ç®¡ç†å·¥å…·
â”œâ”€â”€ .github/              # GitHub Actions å·¥ä½œæµ
â”œâ”€â”€ package.json          # å‰ç«¯é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json         # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts        # Vite æ„å»ºé…ç½®
â””â”€â”€ vitest.config.ts      # æµ‹è¯•é…ç½®
```

## æ ¸å¿ƒåŠŸèƒ½

### è§’è‰²æ„å»º

- **è§’è‰²é€‰æ‹©**ï¼šé€‰æ‹©æ¸¸æˆä¸­çš„è§’è‰²
- **ç­‰çº§é…ç½®**ï¼šè®¾ç½®è§’è‰²ç­‰çº§
- **æŠ€èƒ½é€‰æ‹©**ï¼šé…ç½®è§’è‰²æŠ€èƒ½å’Œç­‰çº§
- **æ­¦å™¨è£…å¤‡**ï¼šé€‰æ‹©è¿‘æˆ˜å’Œè¿œç¨‹æ­¦å™¨
- **MOD é…ç½®**ï¼šè£…å¤‡å’Œç®¡ç† MOD
- **BUFF è®¾ç½®**ï¼šæ·»åŠ å’Œé…ç½® BUFF

### ä¼¤å®³è®¡ç®—

- **å±æ€§è®¡ç®—**ï¼šè®¡ç®—è§’è‰²çš„åŸºç¡€å±æ€§å’Œæˆ˜æ–—å±æ€§
- **æŠ€èƒ½ä¼¤å®³**ï¼šç²¾ç¡®è®¡ç®—æŠ€èƒ½çš„ä¼¤å®³æœŸæœ›
- **æ­¦å™¨ä¼¤å®³**ï¼šè®¡ç®—æ­¦å™¨çš„å•æ¬¡ä¼¤å®³å’Œè§¦å‘æ•ˆæœ
- **ç›®æ ‡å‡½æ•°: è‡ªå®šä¹‰è¡¨è¾¾å¼**ï¼š
    - æ”¯æŒæ•°æ®çš„è‡ªå®šä¹‰è¡¨è¾¾å¼
    - ä¾‹å¦‚ï¼š`(ä¼¤å®³ + ç¥æ™º) * èŒƒå›´`

### æ•Œæ–¹é…ç½®

- **æ•Œæ–¹ç±»å‹**ï¼šå°å‹ã€å¤§å‹ã€é¦–é¢†
- **æ•Œæ–¹ç­‰çº§**ï¼šè®¾ç½®æ•Œæ–¹ç­‰çº§
- **æ•Œæ–¹æŠ—æ€§**ï¼šé…ç½®æ•Œæ–¹æŠ—æ€§
- **æ•Œæ–¹è¡€é‡ç±»å‹**ï¼šç”Ÿå‘½ã€æŠ¤ç›¾ã€æˆ˜å§¿

## dna-api

çšçšè§’APIç»„ä»¶ [dna-api](https://www.npmjs.com/package/dna-api) æä¾›äº†ä¸æ¸¸æˆæ•°æ®äº¤äº’çš„ API æ¥å£, å·²å‘å¸ƒåˆ° NPM, å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­å¼•å…¥ä½¿ç”¨

```bash
npm install dna-api
# pnpm
pnpm install dna-api
# bun
bun install dna-api
```

## dna-builder-data

æ ¸å¿ƒè®¡ç®—ç»„ä»¶ [dna-builder-data](https://www.npmjs.com/package/dna-builder-data) å·²å‘å¸ƒåˆ° NPM, å¯ä»¥ç›´æ¥åœ¨é¡¹ç›®ä¸­å¼•å…¥ä½¿ç”¨

```
npm install dna-builder-data
```

```typescript
// åˆ›å»ºè§’è‰²æ„å»ºå®ä¾‹
import { CharBuild, LeveledChar, LeveledWeapon, LeveledMod, LeveledBuff } from "dna-builder-data"

const options = {
    char: new LeveledChar("é»ç‘Ÿ", 80),
    melee: new LeveledWeapon("é“¸é“è€…"),
    ranged: new LeveledWeapon("çƒˆç„°å­¤æ²™"),
    charMods: [new LeveledMod(41324)],
    buffs: [new LeveledBuff("é»ç‘ŸE")],
    hpPercent: 1,
    resonanceGain: 0,
    baseName: "æ™®é€šæ”»å‡»",
    targetFunction: "DPS",
    enemyId: 130,
    enemyLevel: 80,
    skillLevel: 10,
}

// è®¡ç®—ä¼¤å®³
const cb = new CharBuild(options)
const damage = cb.calculate() // è·å–è®¡ç®—ç»“æœ
```

## å±æ€§è®¡ç®—è§„åˆ™

### åŸºç¡€å±æ€§

- æ”»å‡»ã€ç”Ÿå‘½ã€æŠ¤ç›¾ã€é˜²å¾¡å—ç­‰çº§å½±å“
- ç¥æ™ºå±æ€§ä¸ºå›ºå®šå€¼
- æ‰€æœ‰å±æ€§éƒ½å¯ä»¥é€šè¿‡æ­¦å™¨ã€MOD å’Œ BUFF è·å¾—åŠ æˆ

### æˆ˜æ–—å±æ€§

- å¨åŠ›ã€è€ä¹…ã€æ•ˆç›Šã€èŒƒå›´èµ·å§‹å€¼ä¸º 1
- å…¶ä»–å±æ€§èµ·å§‹å€¼ä¸º 0
- éƒ¨åˆ†å±æ€§æœ‰ä¸Šé™é™åˆ¶

### ä¼¤å®³è®¡ç®—

#### æŠ€èƒ½ä¼¤å®³

```
æŠ€èƒ½ä¼¤å®³æœŸæœ› = æŠ€èƒ½åŸºç¡€ä¼¤å®³ * (1 - æ•Œæ–¹æŠ—æ€§ + å±æ€§ç©¿é€) * æ˜‚æ‰¬ä¹˜åŒº * èƒŒæ°´ä¹˜åŒº * é˜²å¾¡ä¹˜åŒº * (1 + å¢ä¼¤ + æŠ€èƒ½ä¼¤å®³) * (1 + ç‹¬ç«‹å¢ä¼¤)
```

#### æ­¦å™¨ä¼¤å®³

```
æ­¦å™¨ä¼¤å®³æœŸæœ› = æ­¦å™¨æ”»å‡»å€ç‡ * (è§’è‰²æ”»å‡» * (1 - æ•Œæ–¹æŠ—æ€§ + å±æ€§ç©¿é€) + æ­¦å™¨ä¼¤å®³ç‰©ç†éƒ¨åˆ† * (1 + è§¦å‘ä¼¤å®³å€ç‡ * æ­¦å™¨è§¦å‘)) * (1 + æš´å‡»ç‡ * (æš´å‡»ä¼¤å®³ - 1)) * æ˜‚æ‰¬ä¹˜åŒº * èƒŒæ°´ä¹˜åŒº * é˜²å¾¡ä¹˜åŒº * (1 + å¢ä¼¤ + æ­¦å™¨ä¼¤å®³) * (1 + ç‹¬ç«‹å¢ä¼¤) * (1 + è¿½åŠ ä¼¤å®³)
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š

- Issueï¼šåœ¨ GitHub ä»“åº“æäº¤ Issue

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=pa001024/dna-builder&type=date&legend=top-left)](https://www.star-history.com/#pa001024/dna-builder&type=date&legend=top-left)
